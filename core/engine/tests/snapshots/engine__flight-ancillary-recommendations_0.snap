---
source: core/engine/tests/engine.rs
expression: serialized_result
---
performance: "[perf]"
result:
  recommendations:
    - priority:
        "$serde_json::private::Number": "5"
      productType: lounge
    - priority:
        "$serde_json::private::Number": "4"
      productType: priority_boarding
    - priority:
        "$serde_json::private::Number": "3"
      productType: wifi
    - priority:
        "$serde_json::private::Number": "4"
      productType: lounge
    - priority:
        "$serde_json::private::Number": "3"
      productType: travel_insurance
    - priority:
        "$serde_json::private::Number": "2"
      productType: premium_meal
    - priority:
        "$serde_json::private::Number": "4"
      productType: fast_track_security
trace:
  8cb0ce16-c426-4988-b39f-d122499bc1fd:
    id: 8cb0ce16-c426-4988-b39f-d122499bc1fd
    input:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      recommendations:
        additional:
          - priority:
              "$serde_json::private::Number": "4"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "3"
            productType: travel_insurance
          - priority:
              "$serde_json::private::Number": "2"
            productType: premium_meal
          - priority:
              "$serde_json::private::Number": "4"
            productType: fast_track_security
        base:
          - priority:
              "$serde_json::private::Number": "5"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "4"
            productType: priority_boarding
          - priority:
              "$serde_json::private::Number": "3"
            productType: wifi
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    name: join_recommendations
    order:
      "$serde_json::private::Number": "5"
    output:
      recommendations:
        - priority:
            "$serde_json::private::Number": "5"
          productType: lounge
        - priority:
            "$serde_json::private::Number": "4"
          productType: priority_boarding
        - priority:
            "$serde_json::private::Number": "3"
          productType: wifi
        - priority:
            "$serde_json::private::Number": "4"
          productType: lounge
        - priority:
            "$serde_json::private::Number": "3"
          productType: travel_insurance
        - priority:
            "$serde_json::private::Number": "2"
          productType: premium_meal
        - priority:
            "$serde_json::private::Number": "4"
          productType: fast_track_security
    performance: "[perf]"
    traceData:
      recommendations:
        result: "[{\"productType\":\"lounge\",\"priority\":5},{\"productType\":\"priority_boarding\",\"priority\":4},{\"productType\":\"wifi\",\"priority\":3},{\"priority\":4,\"productType\":\"lounge\"},{\"productType\":\"travel_insurance\",\"priority\":3},{\"productType\":\"premium_meal\",\"priority\":2},{\"productType\":\"fast_track_security\",\"priority\":4}]"
  dt1:
    id: dt1
    input:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    name: categorize_flight_duration
    order:
      "$serde_json::private::Number": "1"
    output:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    performance: "[perf]"
    traceData:
      index:
        "$serde_json::private::Number": "0"
      reference_map:
        route.flightDurationMinutes:
          "$serde_json::private::Number": "480"
      rule:
        _id: r1-1
        "route.flightDurationMinutes[i1-1]": ">= 240"
  dt2:
    id: dt2
    input:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    name: base_recommendations
    order:
      "$serde_json::private::Number": "3"
    output:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      recommendations:
        base:
          - priority:
              "$serde_json::private::Number": "5"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "4"
            productType: priority_boarding
          - priority:
              "$serde_json::private::Number": "3"
            productType: wifi
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    performance: "[perf]"
    traceData:
      - index:
          "$serde_json::private::Number": "0"
        reference_map:
          flightDurationCategory: long
          travelPurpose: business
        rule:
          _id: r2-1
          "flightDurationCategory[i2-2]": "'long'"
          "travelPurpose[i2-1]": "'business'"
      - index:
          "$serde_json::private::Number": "1"
        reference_map:
          flightDurationCategory: long
          travelPurpose: business
        rule:
          _id: r2-2
          "flightDurationCategory[i2-2]": "'medium', 'long'"
          "travelPurpose[i2-1]": "'business'"
      - index:
          "$serde_json::private::Number": "2"
        reference_map:
          flightDurationCategory: long
          travelPurpose: business
        rule:
          _id: r2-3
          "flightDurationCategory[i2-2]": ""
          "travelPurpose[i2-1]": "'business'"
  dt3:
    id: dt3
    input:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      recommendations:
        base:
          - priority:
              "$serde_json::private::Number": "5"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "4"
            productType: priority_boarding
          - priority:
              "$serde_json::private::Number": "3"
            productType: wifi
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    name: additional_recommendations
    order:
      "$serde_json::private::Number": "4"
    output:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      recommendations:
        additional:
          - priority:
              "$serde_json::private::Number": "4"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "3"
            productType: travel_insurance
          - priority:
              "$serde_json::private::Number": "2"
            productType: premium_meal
          - priority:
              "$serde_json::private::Number": "4"
            productType: fast_track_security
        base:
          - priority:
              "$serde_json::private::Number": "5"
            productType: lounge
          - priority:
              "$serde_json::private::Number": "4"
            productType: priority_boarding
          - priority:
              "$serde_json::private::Number": "3"
            productType: wifi
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    performance: "[perf]"
    traceData:
      - index:
          "$serde_json::private::Number": "0"
        reference_map: {}
        rule:
          _id: r3-1
      - index:
          "$serde_json::private::Number": "1"
        reference_map: {}
        rule:
          _id: r3-2
      - index:
          "$serde_json::private::Number": "2"
        reference_map: {}
        rule:
          _id: r3-3
      - index:
          "$serde_json::private::Number": "3"
        reference_map: {}
        rule:
          _id: r3-4
  ex1:
    id: ex1
    input:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    name: calculate_customer_attributes
    order:
      "$serde_json::private::Number": "2"
    output:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      flightDurationCategory: long
      hasBoughtBaggage: false
      hasBoughtLounge: false
      hasBoughtMeals: false
      hasBoughtSeats: true
      isPremiumCustomer: true
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    performance: "[perf]"
    traceData:
      hasBoughtBaggage:
        result: "false"
      hasBoughtLounge:
        result: "false"
      hasBoughtMeals:
        result: "false"
      hasBoughtSeats:
        result: "true"
      isPremiumCustomer:
        result: "true"
  ip1:
    id: ip1
    input: ~
    name: request
    order:
      "$serde_json::private::Number": "0"
    output:
      customerProfile:
        id: cust-12345
        loyaltyTier: gold
        preferredCurrency: USD
        preferredLanguage: en
        travelFrequency: frequent
      previousPurchases:
        - bookingId: bkg-9876
          productDetails:
            amount:
              "$serde_json::private::Number": "35"
            seatType: extra_legroom
          productType: seat
          purchaseDate: "2024-12-10T14:22:00Z"
        - bookingId: bkg-8765
          productDetails:
            amount:
              "$serde_json::private::Number": "19.99"
            packageType: full_flight
          productType: wifi
          purchaseDate: "2024-11-05T09:15:00Z"
      route:
        departureTime: "2025-04-15T08:30:00Z"
        destination: international
        flightDurationMinutes:
          "$serde_json::private::Number": "480"
        hasAirportLounge: true
        origin: JFK
        returnTime: "2025-04-22T15:45:00Z"
      travelPurpose: business
      tripDetails:
        cabinClass: economy
        dateFlexibility: fixed
        passengers:
          "$serde_json::private::Number": "1"
    performance: "[perf]"
    traceData: ~
