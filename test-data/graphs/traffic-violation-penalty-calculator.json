{
  "tests": [
    {
      "input": {
        "violation": {
          "type": "speeding",
          "speed_over_limit": 25,
          "in_school_zone": true,
          "date": "2025-03-15T14:30:00Z",
          "location": "Main St & 5th Ave"
        },
        "driver": {
          "license_number": "DL123456789",
          "previous_violations": 1,
          "license_issue_date": "2020-06-15"
        }
      },
      "output": {
        "assessment": {
          "base_fine": 150,
          "base_points": 3,
          "final_fine": 180,
          "final_points": 3,
          "license_suspension_recommended": false,
          "payment_deadline_days": 30,
          "risk_level": "medium",
          "severity": "moderate"
        },
        "driver": {
          "license_issue_date": "2020-06-15",
          "license_number": "DL123456789",
          "previous_violations": 1
        },
        "violation": {
          "date": "2025-03-15T14:30:00Z",
          "in_school_zone": true,
          "location": "Main St & 5th Ave",
          "speed_over_limit": 25,
          "type": "speeding"
        }
      }
    }
  ],
  "nodes": [
    {
      "type": "inputNode",
      "content": {
        "schema": ""
      },
      "id": "input",
      "name": "request",
      "position": {
        "x": 110,
        "y": 114
      }
    },
    {
      "type": "decisionTableNode",
      "content": {
        "hitPolicy": "first",
        "rules": [
          {
            "_id": "rule1",
            "i1": "'speeding'",
            "i2": "> 30",
            "o1": "'severe'",
            "o2": "4",
            "o3": "300"
          },
          {
            "_id": "rule2",
            "i1": "'speeding'",
            "i2": "> 15",
            "o1": "'moderate'",
            "o2": "3",
            "o3": "150"
          },
          {
            "_id": "rule3",
            "i1": "'speeding'",
            "i2": "",
            "o1": "'minor'",
            "o2": "2",
            "o3": "75"
          },
          {
            "_id": "rule4",
            "i1": "'running_red_light'",
            "i2": "",
            "o1": "'moderate'",
            "o2": "3",
            "o3": "200"
          },
          {
            "_id": "rule5",
            "i1": "'illegal_turn'",
            "i2": "",
            "o1": "'minor'",
            "o2": "2",
            "o3": "100"
          },
          {
            "_id": "rule6",
            "i1": "'dui'",
            "i2": "",
            "o1": "'severe'",
            "o2": "6",
            "o3": "500"
          },
          {
            "_id": "rule7",
            "i1": "'driving_without_license'",
            "i2": "",
            "o1": "'moderate'",
            "o2": "3",
            "o3": "250"
          },
          {
            "_id": "rule8",
            "i1": "'reckless_driving'",
            "i2": "",
            "o1": "'severe'",
            "o2": "5",
            "o3": "350"
          },
          {
            "_id": "rule9",
            "i1": "",
            "i2": "",
            "o1": "'minor'",
            "o2": "1",
            "o3": "50"
          }
        ],
        "inputs": [
          {
            "id": "i1",
            "name": "Violation Type",
            "field": "violation.type"
          },
          {
            "id": "i2",
            "name": "Speed Over Limit",
            "field": "violation.speed_over_limit"
          }
        ],
        "outputs": [
          {
            "id": "o1",
            "name": "Severity",
            "field": "assessment.severity"
          },
          {
            "id": "o2",
            "name": "Points",
            "field": "assessment.base_points"
          },
          {
            "id": "o3",
            "name": "Base Fine",
            "field": "assessment.base_fine"
          }
        ],
        "passThrough": true,
        "inputField": null,
        "outputPath": null,
        "executionMode": "single",
        "passThorough": false
      },
      "id": "violation_classification",
      "name": "classify_violation",
      "position": {
        "x": 430,
        "y": 114
      }
    },
    {
      "type": "decisionTableNode",
      "content": {
        "hitPolicy": "first",
        "rules": [
          {
            "_id": "pc1",
            "i1": "'severe'",
            "i2": "> 2",
            "i3": "true",
            "o1": "assessment.base_fine * 2",
            "o2": "assessment.base_points * 1.5",
            "o3": "true"
          },
          {
            "_id": "pc2",
            "i1": "'severe'",
            "i2": "",
            "i3": "",
            "o1": "assessment.base_fine * 1.5",
            "o2": "assessment.base_points",
            "o3": "false"
          },
          {
            "_id": "pc3",
            "i1": "'moderate'",
            "i2": "> 2",
            "i3": "",
            "o1": "assessment.base_fine * 1.25",
            "o2": "assessment.base_points * 1.25",
            "o3": "false"
          },
          {
            "_id": "pc4",
            "i1": "'moderate'",
            "i2": "",
            "i3": "true",
            "o1": "assessment.base_fine * 1.2",
            "o2": "assessment.base_points",
            "o3": "false"
          },
          {
            "_id": "pc5",
            "i1": "'minor'",
            "i2": "> 3",
            "i3": "",
            "o1": "assessment.base_fine * 1.1",
            "o2": "assessment.base_points",
            "o3": "false"
          },
          {
            "_id": "pc6",
            "i1": "",
            "i2": "",
            "i3": "",
            "o1": "assessment.base_fine",
            "o2": "assessment.base_points",
            "o3": "false"
          }
        ],
        "inputs": [
          {
            "id": "i1",
            "name": "Severity",
            "field": "assessment.severity"
          },
          {
            "id": "i2",
            "name": "Previous Violations",
            "field": "driver.previous_violations"
          },
          {
            "id": "i3",
            "name": "In School Zone",
            "field": "violation.in_school_zone"
          }
        ],
        "outputs": [
          {
            "id": "o1",
            "name": "Final Fine",
            "field": "assessment.final_fine"
          },
          {
            "id": "o2",
            "name": "Final Points",
            "field": "assessment.final_points"
          },
          {
            "id": "o3",
            "name": "License Suspension Recommended",
            "field": "assessment.license_suspension_recommended"
          }
        ],
        "passThrough": true,
        "inputField": null,
        "outputPath": null,
        "executionMode": "single",
        "passThorough": false
      },
      "id": "penalty_calculation",
      "name": "calculate_penalty",
      "position": {
        "x": 750,
        "y": 114
      }
    },
    {
      "type": "expressionNode",
      "content": {
        "expressions": [
          {
            "id": "expr1",
            "key": "assessment.final_fine",
            "value": "round(assessment.final_fine)"
          },
          {
            "id": "expr2",
            "key": "assessment.final_points",
            "value": "round(assessment.final_points)"
          }
        ],
        "passThrough": true,
        "inputField": null,
        "outputPath": null,
        "executionMode": "single"
      },
      "id": "final_assessment",
      "name": "finalize_assessment",
      "position": {
        "x": 1070,
        "y": 114
      }
    },
    {
      "type": "decisionTableNode",
      "content": {
        "hitPolicy": "first",
        "rules": [
          {
            "_id": "ra1",
            "i1": ">= 5",
            "i2": "'severe'",
            "o1": "'high'",
            "o2": "15"
          },
          {
            "_id": "ra2",
            "i1": ">= 3",
            "i2": "'severe'",
            "o1": "'medium'",
            "o2": "15"
          },
          {
            "_id": "ra3",
            "i1": ">= 3",
            "i2": "'moderate'",
            "o1": "'medium'",
            "o2": "30"
          },
          {
            "_id": "ra4",
            "i1": ">= 3",
            "i2": "'minor'",
            "o1": "'medium'",
            "o2": "45"
          },
          {
            "_id": "ra5",
            "i1": "",
            "i2": "'severe'",
            "o1": "'low'",
            "o2": "15"
          },
          {
            "_id": "ra6",
            "i1": "",
            "i2": "'moderate'",
            "o1": "'low'",
            "o2": "30"
          },
          {
            "_id": "ra7",
            "i1": "",
            "i2": "'minor'",
            "o1": "'low'",
            "o2": "45"
          },
          {
            "_id": "ra8",
            "i1": "",
            "i2": "",
            "o1": "'low'",
            "o2": "45"
          }
        ],
        "inputs": [
          {
            "id": "i1",
            "name": "Final Points",
            "field": "assessment.final_points"
          },
          {
            "id": "i2",
            "name": "Severity",
            "field": "assessment.severity"
          }
        ],
        "outputs": [
          {
            "id": "o1",
            "name": "Risk Level",
            "field": "assessment.risk_level"
          },
          {
            "id": "o2",
            "name": "Payment Deadline Days",
            "field": "assessment.payment_deadline_days"
          }
        ],
        "passThrough": true,
        "inputField": null,
        "outputPath": null,
        "executionMode": "single"
      },
      "id": "risk_assessment",
      "name": "assess_risk_and_deadlines",
      "position": {
        "x": 1390,
        "y": 114
      }
    }
  ],
  "edges": [
    {
      "id": "edge1",
      "sourceId": "input",
      "targetId": "violation_classification",
      "type": "edge"
    },
    {
      "id": "edge2",
      "sourceId": "violation_classification",
      "targetId": "penalty_calculation",
      "type": "edge"
    },
    {
      "id": "edge3",
      "sourceId": "penalty_calculation",
      "targetId": "final_assessment",
      "type": "edge"
    },
    {
      "id": "edge4",
      "sourceId": "final_assessment",
      "targetId": "risk_assessment",
      "type": "edge"
    }
  ]
}